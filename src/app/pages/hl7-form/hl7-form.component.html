<div class="main-container-page">
  
<div class="container mt-5">
  <h2 class="mb-4">Formulario HL7</h2>
  <form>
    <div class="form-group">
      <label for="patientName">Nombre del Paciente:</label>
      <input type="text" class="form-control" id="patientName" name="patientName" [(ngModel)]="paciente.nombre">
    </div>
    <div class="form-group">
      <label for="patientId">ID del Paciente:</label>
      <input type="text" class="form-control" id="patientId" name="patientId" [(ngModel)]="paciente.id">
    </div>
    <div class="form-group">
      <label for="birthDate">Fecha de Nacimiento:</label>
      <input type="date" class="form-control" id="birthDate" name="birthDate" [(ngModel)]="paciente.fechaNacimiento">
    </div>
    <div class="form-group">
      <label for="gender">Genero:</label>
      <select class="form-control" id="gender" name="gender" [(ngModel)]="paciente.genero">
        <option value="Masculino">Masculino</option>
        <option value="Femenino">Femenino</option>
        <option value="Otro">Otro</option>
      </select>
    </div>
    <div class="form-group">
      <label for="address">Direccion:</label>
      <input type="text" class="form-control" id="address" name="address" [(ngModel)]="paciente.direccion">
    </div>
    <div class="form-group">
      <label for="phoneNumber">Celular:</label>
      <input type="tel" class="form-control" id="phoneNumber" name="phoneNumber" [(ngModel)]="paciente.celular">
    </div>
    <div class="form-group">
      <label for="email">Correo Electronico:</label>
      <input type="email" class="form-control" id="email" name="email" [(ngModel)]="paciente.correo">
    </div>
    <div class="form-group">
      <label for="diagnosis">Diagnostico:</label>
      <textarea class="form-control" id="diagnosis" name="diagnosis" [(ngModel)]="paciente.diagnostico"></textarea>
    </div>
    <div class="form-group">
      <label for="allergies">Alergias:</label>
      <textarea class="form-control" id="allergies" name="allergies" [(ngModel)]="paciente.alergias"></textarea>
    </div>
    <div class="form-group">
      <button type="button" class="btn btn-primary" (click)="startRecording()" [disabled]="isRecording">
        <svg viewBox="0 0 16 16" width="20" height="20">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-mic" viewBox="0 0 16 16">
            <path d="M3.5 6.5A.5.5 0 0 1 4 7v1a4 4 0 0 0 8 0V7a.5.5 0 0 1 1 0v1a5 5 0 0 1-4.5 4.975V15h3a.5.5 0 0 1 0 1h-7a.5.5 0 0 1 0-1h3v-2.025A5 5 0 0 1 3 8V7a.5.5 0 0 1 .5-.5"/>
            <path d="M10 8a2 2 0 1 1-4 0V3a2 2 0 1 1 4 0zM8 0a3 3 0 0 0-3 3v5a3 3 0 0 0 6 0V3a3 3 0 0 0-3-3"/>
          </svg>
          <circle class="wave" cx="8" cy="6" r="1"/>
          <circle class="wave" cx="8" cy="6" r="1" style="animation-delay: 1s;"/>
          <circle class="wave" cx="8" cy="6" r="1" style="animation-delay: 2s;"/>
          <circle class="wave" cx="8" cy="6" r="1" style="animation-delay: 3s;"/>
        </svg>
        Start Recording</button>
      <button type="button" class="btn btn-secondary" (click)="stopRecording()" [disabled]="!isRecording">Stop Recording</button>
    </div>
    <div *ngIf="blobUrl" class="mt-3">
      <h3>Recorded Audio:</h3>
      <audio [src]="blobUrl" controls class="w-100"></audio>
      <button type="button" class="btn btn-info mt-2" (click)="downloadAudio()">Download Audio</button>
      <p>Audio stored temporarily at: <a [href]="blobUrl" target="_blank">{{blobUrl}}</a></p>
    </div>
  </form>
</div>

<div class="container mt-5 d-flex flex-row">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Subir Tomografías</h5>
      <div class="upload-area" (click)="fileInputT1c.click()" (drop)="onFileDrop($event, 't1c')" (dragover)="$event.preventDefault()" id="uploadArea">
        Arrastra y suelta los archivos aquí o
        <input type="file" #fileInputT1c (change)="onFileSelected($event, 't1c')" hidden>
      
      </div>
      <div class="upload-area" (click)="fileInputT2f.click()" (drop)="onFileDrop($event, 't2f')" (dragover)="$event.preventDefault()" id="uploadArea">
        Arrastra y suelta los archivos aquí o
        <input type="file" #fileInputT2f (change)="onFileSelected($event, 't1c')" hidden>  
      </div>
      <button class="btn btn-primary mt-3" id="uploadButton" (click)="onUpload()">Subir</button>
    </div>

  <div *ngIf="predictionUrl" class="card">
    <div class="card-body">
      <h5 class="card-title">Resultado de la Segmentación</h5>
      <img [src]="predictionUrl" alt="Predicción de Segmentación" class="img-fluid">
    </div>
  </div>

  </div>



</div>


</div>
